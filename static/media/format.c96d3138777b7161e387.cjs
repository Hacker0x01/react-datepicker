"use strict";exports.format=exports.formatDate=format,Object.defineProperty(exports,"formatters",{enumerable:!0,get:function(){return _index3.formatters}}),Object.defineProperty(exports,"longFormatters",{enumerable:!0,get:function(){return _index4.longFormatters}});var _index=require("./_lib/defaultLocale.cjs"),_index2=require("./_lib/defaultOptions.cjs"),_index3=require("./_lib/format/formatters.cjs"),_index4=require("./_lib/format/longFormatters.cjs"),_index5=require("./_lib/protectedTokens.cjs"),_index6=require("./isValid.cjs"),_index7=require("./toDate.cjs");const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(e,t,r){const n=(0,_index2.getDefaultOptions)(),o=r?.locale??n.locale??_index.defaultLocale,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=(0,_index7.toDate)(e,r?.in);if(!(0,_index6.isValid)(s))throw new RangeError("Invalid time value");let c=t.match(longFormattingTokensRegExp).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,_index4.longFormatters[t])(e,o.formatLong)}return e})).join("").match(formattingTokensRegExp).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:cleanEscapedString(e)};if(_index3.formatters[t])return{isToken:!0,value:e};if(t.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));o.localize.preprocessor&&(c=o.localize.preprocessor(s,c));const l={firstWeekContainsDate:a,weekStartsOn:i,locale:o};return c.map((n=>{if(!n.isToken)return n.value;const a=n.value;(!r?.useAdditionalWeekYearTokens&&(0,_index5.isProtectedWeekYearToken)(a)||!r?.useAdditionalDayOfYearTokens&&(0,_index5.isProtectedDayOfYearToken)(a))&&(0,_index5.warnOrThrowProtectedError)(a,t,String(e));return(0,_index3.formatters[a[0]])(s,a,o.localize,l)})).join("")}function cleanEscapedString(e){const t=e.match(escapedStringRegExp);return t?t[1].replace(doubleQuoteRegExp,"'"):e}